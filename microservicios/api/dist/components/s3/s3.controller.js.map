{"version":3,"file":"s3.controller.js","sourceRoot":"/","sources":["components/s3/s3.controller.ts"],"names":[],"mappings":";;;;AACA,qDAAiD;AACjD,qCAAgE;AAChE,gEAA0C;AAE7B,QAAA,MAAM,GAAG,gCAAc,CAAC,cAAc,CAKjD;IACA,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,UAAU;IAChB,WAAW,EAAE,KAAK;IAClB,IAAI,EAAE,kBAAS;IACf,IAAI,EAAE;QACJ,IAAI,EAAE,oBAAW;KAClB;IACK,OAAO,CAAC,EAAE,IAAI,EAAE;;YACpB,MAAM,EAAE,aAAa,EAAE,GAAG,EAAE,GAAG,MAAM,SAAS,CAAC,aAAa,CAAC,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,IAAI,CAAC,CAAC;YACzE,OAAO;gBACL,aAAa;gBACb,GAAG;aACJ,CAAC;QACJ,CAAC;KAAA;CACF,CAAC,CAAC;AAEU,QAAA,WAAW,GAAG;IACzB,MAAM,EAAN,cAAM;CACP,CAAC;AAEF,SAAsB,gBAAgB,CACpC,GAAY,EACZ,GAAa,EACb,IAAkB;;QAElB,IAAI;YACF,MAAM,EAAE,aAAa,EAAE,GAAG,EAAE,GAAG,MAAM,SAAS,CAAC,aAAa,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;YACvE,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,aAAa,EAAE,GAAG,EAAE,CAAC,CAAC;SACpE;QAAC,OAAO,GAAG,EAAE;YACZ,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,uBAAuB,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,CAAC;SACxE;IACH,CAAC;CAAA;AAXD,4CAWC","sourcesContent":["import type { Request, Response, NextFunction } from 'express';\nimport { schemaComposer } from 'graphql-compose';\nimport { S3Payload, SignS3Input, TSignS3Input } from './s3.dto';\nimport * as s3Service from './s3.service';\n\nexport const signS3 = schemaComposer.createResolver<\n  any,\n  {\n    data: TSignS3Input;\n  }\n>({\n  name: 'signS3',\n  kind: 'mutation',\n  description: '...',\n  type: S3Payload,\n  args: {\n    data: SignS3Input,\n  },\n  async resolve({ args }) {\n    const { signedRequest, url } = await s3Service.signS3Service(args?.data);\n    return {\n      signedRequest,\n      url,\n    };\n  },\n});\n\nexport const s3Mutations = {\n  signS3,\n};\n\nexport async function signS3Controller(\n  req: Request,\n  res: Response,\n  next: NextFunction\n) {\n  try {\n    const { signedRequest, url } = await s3Service.signS3Service(req.body);\n    return res.status(200).json({ success: true, signedRequest, url });\n  } catch (err) {\n    res.status(500).json({ err: 'Internal server error', success: false });\n  }\n}\n"]}