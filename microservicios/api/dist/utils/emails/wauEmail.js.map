{"version":3,"file":"wauEmail.js","sourceRoot":"/","sources":["utils/emails/wauEmail.ts"],"names":[],"mappings":";;;;AAAA,0DAA0B;AAC1B,oDAAiD;AAEjD,SAAsB,SAAS,CAC7B,UAAkB,EAClB,KAAa,EACb,SAAiB,EACjB,aAAqB,EACrB,KAAa;;QAEb,IAAI,CAAC,KAAK;YAAE,MAAM,IAAI,6BAAa,CAAC,oBAAoB,CAAC,CAAC;QAE1D,MAAM,MAAM,GAAG;YACb,MAAM,EAAE,MAAM;YACd,OAAO,EAAE,OAAO,CAAC,GAAG,CAAC,WAAW;YAChC,GAAG,EAAE,UAAU,UAAU,EAAE;YAC3B,OAAO,EAAE;gBACP,aAAa,EAAE,UAAU,KAAK,EAAE;aACjC;YACD,IAAI,EAAE;gBACJ,KAAK;gBACL,SAAS;gBACT,cAAc,EAAE,aAAa;aAC9B;SACF,CAAC;QAEF,IAAI;YACF,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,IAAA,eAAK,EAAC,MAAM,CAAC,CAAC;YAErC,IAAI,CAAC,IAAI,CAAC,OAAO;gBAAE,MAAM,IAAI,6BAAa,CAAC,qBAAqB,CAAC,CAAC;YAElE,OAAO,IAAI,CAAC;SACb;QAAC,OAAO,KAAK,EAAE;YACd,OAAO,CAAC,GAAG,CAAC,KAAK,EAAE,qBAAqB,CAAC,CAAC;YAC1C,MAAM,IAAI,6BAAa,CACrB,0CAA0C,KAAK,CAAC,OAAO,EAAE,CAC1D,CAAC;SACH;IACH,CAAC;CAAA;AAnCD,8BAmCC","sourcesContent":["import axios from 'axios';\nimport { NoSentryError } from '../NoSentryError';\n\nexport async function sendEmail(\n  templateId: string,\n  token: string,\n  variables: object,\n  attachmentUrl: string,\n  email: string\n) {\n  if (!token) throw new NoSentryError('Token not provided');\n\n  const config = {\n    method: 'post',\n    baseURL: process.env.SERVICE_URL,\n    url: `/email/${templateId}`,\n    headers: {\n      authorization: `Bearer ${token}`,\n    },\n    data: {\n      email,\n      variables,\n      attachment_url: attachmentUrl,\n    },\n  };\n\n  try {\n    const { data } = await axios(config);\n\n    if (!data.success) throw new NoSentryError('Error sending email');\n\n    return data;\n  } catch (error) {\n    console.log(error, 'Error sending email');\n    throw new NoSentryError(\n      `Error in send email processed to user: ${error.message}`\n    );\n  }\n}\n"]}