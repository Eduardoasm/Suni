{"version":3,"file":"updateLock.js","sourceRoot":"/","sources":["utils/walletService/updateLock.ts"],"names":[],"mappings":";;;;AAAA,0DAA0B;AAC1B,oDAAiD;AASjD;;;;;GAKG;AAEH,SAAsB,WAAW,CAAC,IAAkB;;QAClD,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE;YACf,MAAM,IAAI,6BAAa,CAAC,oBAAoB,CAAC,CAAC;SAC/C;QAED,wBAAwB;QAExB,4CAA4C;QAE5C,yEAAyE;QAEzE,MAAM,MAAM,GAAG;YACb,MAAM,EAAE,OAAO;YACf,OAAO,EAAE,OAAO,CAAC,GAAG,CAAC,WAAW;YAChC,GAAG,EAAE,iBAAiB,IAAI,CAAC,OAAO,EAAE;YACpC,OAAO,EAAE;gBACP,aAAa,EAAE,UAAU,IAAI,CAAC,KAAK,EAAE;aACtC;YACD,IAAI,EAAE;gBACJ,MAAM,EAAE,IAAI,CAAC,MAAM;gBACnB,yDAAyD;gBACzD,UAAU,EAAE,IAAI,CAAC,QAAQ;aAC1B;SACF,CAAC;QAEF,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,IAAA,eAAK,EAAC,MAAM,CAAC,CAAC;QAErC,IAAI,CAAC,IAAI,CAAC,OAAO;YAAE,MAAM,IAAI,6BAAa,CAAC,yBAAyB,CAAC,CAAC;QAEtE,OAAO,IAAI,CAAC;IACd,CAAC;CAAA;AA9BD,kCA8BC","sourcesContent":["import axios from 'axios';\nimport { NoSentryError } from '../NoSentryError';\n\nexport interface TUpdateBlock {\n  token: string;\n  amount: number;\n  makerFee: number;\n  blockId: string;\n}\n\n/**\n * @param token token received from app\n * @param amount the new amount for block/listing\n * @param makerFee the new makerFee for maker\n * @param blockId id for service balance lock\n */\n\nexport async function updateBlock(body: TUpdateBlock): Promise<any> {\n  if (!body.token) {\n    throw new NoSentryError('Token not provided');\n  }\n\n  // const date = dayjs();\n\n  // const dateToExpire = date.add(30, 'day');\n\n  // const formatDateToExpire = dateToExpire.format('YYYY-MM-DD HH:mm:ss');\n\n  const config = {\n    method: 'patch',\n    baseURL: process.env.SERVICE_URL,\n    url: `/wallet/block/${body.blockId}`,\n    headers: {\n      authorization: `Bearer ${body.token}`,\n    },\n    data: {\n      amount: body.amount,\n      // expiresAt: formatDateToExpire,  // expires at contract\n      serviceFee: body.makerFee,\n    },\n  };\n\n  const { data } = await axios(config);\n\n  if (!data.success) throw new NoSentryError('Error in update listing');\n\n  return data;\n}\n"]}