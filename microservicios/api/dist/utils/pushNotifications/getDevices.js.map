{"version":3,"file":"getDevices.js","sourceRoot":"/","sources":["utils/pushNotifications/getDevices.ts"],"names":[],"mappings":";;;;AAAA,0DAA0B;AAC1B,oDAAiD;AACjD;;;GAGG;AAEH,SAAsB,UAAU,CAAC,KAAa,EAAE,MAAe;;;QAC7D,IAAI;YACF,IAAI,CAAC,KAAK,EAAE;gBACV,MAAM,IAAI,6BAAa,CAAC,oBAAoB,CAAC,CAAC;aAC/C;YAED,MAAM,MAAM,GAAG;gBACb,MAAM,EAAE,KAAK;gBACb,OAAO,EAAE,OAAO,CAAC,GAAG,CAAC,WAAW;gBAChC,GAAG,EAAE,WAAW,MAAM,EAAE;gBACxB,OAAO,EAAE;oBACP,aAAa,EAAE,UAAU,KAAK,EAAE;iBACjC;aACF,CAAC;YAEF,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,IAAA,eAAK,EAAC,MAAM,CAAC,CAAC;YAErC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;gBACjB,MAAM,IAAI,6BAAa,CAAC,gCAAgC,CAAC,CAAC;aAC3D;YAED,OAAO,IAAI,CAAC,IAAI,CAAC;SAClB;QAAC,OAAO,KAAK,EAAE;YACd,OAAO,CAAC,GAAG,CAAC,KAAK,EAAE,sBAAsB,CAAC,CAAC;YAC3C,MAAM,IAAI,6BAAa,CAAC,yBAAyB,MAAA,KAAK,CAAC,OAAO,mCAAI,KAAK,EAAE,CAAC,CAAC;SAC5E;;CACF;AA1BD,gCA0BC","sourcesContent":["import axios from 'axios';\nimport { NoSentryError } from '../NoSentryError';\n/**\n *@param userId id from user\n *@param token token received from app\n */\n\nexport async function getDevices(token: string, userId?: string) {\n  try {\n    if (!token) {\n      throw new NoSentryError('Token not provided');\n    }\n\n    const config = {\n      method: 'get',\n      baseURL: process.env.SERVICE_URL,\n      url: `/device/${userId}`,\n      headers: {\n        authorization: `Bearer ${token}`,\n      },\n    };\n\n    const { data } = await axios(config);\n\n    if (!data.success) {\n      throw new NoSentryError('Error in get devices from user');\n    }\n\n    return data.data;\n  } catch (error) {\n    console.log(error, 'Error in get devices');\n    throw new NoSentryError(`Error in get devices: ${error.message ?? error}`);\n  }\n}\n"]}