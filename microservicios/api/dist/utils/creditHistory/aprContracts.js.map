{"version":3,"file":"aprContracts.js","sourceRoot":"/","sources":["utils/creditHistory/aprContracts.ts"],"names":[],"mappings":";;;;AAAA,6GAAuF;AAEvF,SAAsB,mBAAmB,CAAC,MAAc;;QACtD,MAAM,YAAY,GAAG,MAAM,eAAe,CAAC,SAAS,CAAC;YACnD;gBACE,MAAM,EAAE;oBACN,QAAQ,EAAE,MAAM;iBACjB;aACF;YACD;gBACE,MAAM,EAAE;oBACN,GAAG,EAAE,IAAI;oBACT,GAAG,EAAE;wBACH,IAAI,EAAE,OAAO;qBACd;iBACF;aACF;SACF,CAAC,CAAC;QAEH,OAAO,YAAY,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IACxC,CAAC;CAAA;AAlBD,kDAkBC","sourcesContent":["import * as contractService from '../../components/contract/contract/contract.service';\n\nexport async function getAprUserContracts(userId: string) {\n  const aprContracts = await contractService.aggregate([\n    {\n      $match: {\n        borrower: userId,\n      },\n    },\n    {\n      $group: {\n        _id: null,\n        apr: {\n          $avg: '$rate',\n        },\n      },\n    },\n  ]);\n\n  return aprContracts[0].apr.toFixed(2);\n}\n"]}