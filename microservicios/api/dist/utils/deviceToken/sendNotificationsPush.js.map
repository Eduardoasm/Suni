{"version":3,"file":"sendNotificationsPush.js","sourceRoot":"/","sources":["utils/deviceToken/sendNotificationsPush.ts"],"names":[],"mappings":";;;;AAAA,oCAAoC;AACpC,0DAA0B;AAE1B;;;;;;GAMG;AACH,SAAsB,oBAAoB,CACxC,WAAmB,EACnB,KAAa,EACb,IAAY,EACZ,WAAmB,MAAM;;QAEzB,sBAAsB;QACtB,MAAM,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC;YAC1B,EAAE,EAAE,WAAW;YACf,YAAY,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE;YAC7B,QAAQ;SACT,CAAC,CAAC;QAEH,uBAAuB;QACvB,MAAM,MAAM,GAAG;YACb,MAAM,EAAE,MAAM;YACd,GAAG,EAAE,qCAAqC;YAC1C,OAAO,EAAE;gBACP,aAAa,EAAE,OAAO,OAAO,CAAC,GAAG,CAAC,cAAc,EAAE;gBAClD,cAAc,EAAE,kBAAkB;aACnC;YACD,IAAI;SACL,CAAC;QAEF,eAAe;QACf,MAAM,IAAA,eAAK,EAAC,MAAM,CAAC,CAAC,KAAK,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC,CAAC;IACpE,CAAC;CAAA;AA1BD,oDA0BC","sourcesContent":["/* eslint-disable import/no-cycle */\nimport axios from 'axios';\n\n/**\n * Sends push notification to the user's device.\n * @param {string} deviceToken The device token of the user\n * @param {string} title The title of the notification\n * @param {string} body The description of the notification\n * @param {string} priority The priority of the notification\n */\nexport async function sendPushNotification(\n  deviceToken: string,\n  title: string,\n  body: string,\n  priority: string = 'high'\n) {\n  // Create request body\n  const data = JSON.stringify({\n    to: deviceToken,\n    notification: { title, body },\n    priority,\n  });\n\n  // Create config object\n  const config = {\n    method: 'post',\n    url: 'https://fcm.googleapis.com/fcm/send',\n    headers: {\n      Authorization: `key=${process.env.FCM_SERVER_KEY}`,\n      'Content-Type': 'application/json',\n    },\n    data,\n  };\n\n  // Send request\n  await axios(config).catch((error) => console.log('error', error));\n}\n"]}