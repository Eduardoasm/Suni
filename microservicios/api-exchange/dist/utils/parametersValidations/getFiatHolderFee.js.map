{"version":3,"file":"getFiatHolderFee.js","sourceRoot":"/","sources":["utils/parametersValidations/getFiatHolderFee.ts"],"names":[],"mappings":";;;;AAGA,SAAsB,gBAAgB,CAAC,IAAa,EAAE,QAAmB;;QACvE,IAAI,IAAI,CAAC,YAAY,CAAC,WAAW,EAAE,KAAK,KAAK,EAAE;YAC7C,IAAI,IAAI,CAAC,iBAAiB,IAAI,QAAQ,CAAC,GAAG,CAAC,eAAe,EAAE;gBAC1D,OAAO,MAAM,CACX,CAAC,QAAQ,CAAC,GAAG,CAAC,mCAAmC,CAAC,IAAI,KAAK,OAAO;oBAChE,CAAC,CAAC,QAAQ,CAAC,GAAG,CAAC,mCAAmC,CAAC,KAAK;oBACxD,CAAC,CAAC,CAAC,QAAQ,CAAC,GAAG,CAAC,mCAAmC,CAAC,KAAK;wBACrD,IAAI,CAAC,iBAAiB,CAAC;wBACzB,GAAG,CACN,CAAC,OAAO,CAAC,CAAC,CAAC,CACb,CAAC;aACH;YACD,OAAO,MAAM,CACX,CAAC,QAAQ,CAAC,GAAG,CAAC,kCAAkC,CAAC,IAAI,KAAK,OAAO;gBAC/D,CAAC,CAAC,QAAQ,CAAC,GAAG,CAAC,kCAAkC,CAAC,KAAK;gBACvD,CAAC,CAAC,CAAC,QAAQ,CAAC,GAAG,CAAC,kCAAkC,CAAC,KAAK;oBACpD,IAAI,CAAC,iBAAiB,CAAC;oBACzB,GAAG,CACN,CAAC,OAAO,CAAC,CAAC,CAAC,CACb,CAAC;SACH;QACD,IAAI,IAAI,CAAC,YAAY,CAAC,iBAAiB,EAAE,KAAK,KAAK,EAAE;YACnD,OAAO,IAAI,CAAC,KAAK,CACf,CAAC,CAAC,IAAI,CAAC,QAAQ,KAAK,OAAO,CAAC,CAAC,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,QAAQ,CAAC,QAAQ,CAAC;gBAClE,IAAI,CAAC,iBAAiB,CAAC;gBACvB,GAAG,CACN,CAAC;SACH;QACD,OAAO,CACL,CAAC,CAAC,IAAI,CAAC,QAAQ,KAAK,OAAO,CAAC,CAAC,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,QAAQ,CAAC,QAAQ,CAAC;YAClE,IAAI,CAAC,iBAAiB,CAAC;YACzB,GAAG,CACJ,CAAC;IACJ,CAAC;CAAA;AAjCD,4CAiCC","sourcesContent":["import { TGetFee } from '../../components/transaction/transaction.dto';\nimport { ISettings } from '../../components/settings/settings.model';\n\nexport async function getFiatHolderFee(body: TGetFee, settings: ISettings) {\n  if (body.assetNetwork.toLowerCase() === 'btc') {\n    if (body.transactionAmount <= settings.btc.transBreakPoint) {\n      return Number(\n        (settings.btc.fiatHolderServiceFeeUnderBreakPoint.type === 'fixed'\n          ? settings.btc.fiatHolderServiceFeeUnderBreakPoint.value\n          : (settings.btc.fiatHolderServiceFeeUnderBreakPoint.value *\n              body.transactionAmount) /\n            100\n        ).toFixed(8)\n      );\n    }\n    return Number(\n      (settings.btc.fiatHolderServiceFeeOverBreakPoint.type === 'fixed'\n        ? settings.btc.fiatHolderServiceFeeOverBreakPoint.value\n        : (settings.btc.fiatHolderServiceFeeOverBreakPoint.value *\n            body.transactionAmount) /\n          100\n      ).toFixed(8)\n    );\n  }\n  if (body.assetNetwork.toLocaleLowerCase() === 'lnd') {\n    return Math.trunc(\n      ((body.userRole === 'maker' ? settings.makerFee : settings.takerFee) *\n        body.transactionAmount) /\n        100\n    );\n  }\n  return (\n    ((body.userRole === 'maker' ? settings.makerFee : settings.takerFee) *\n      body.transactionAmount) /\n    100\n  );\n}\n"]}